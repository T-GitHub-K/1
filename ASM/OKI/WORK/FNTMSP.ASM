INCLUDE	MDOS.H
INCLUDE	STD.H

CODE	SEGMENT
	ASSUME	CS:CODE,DS:CODE,ES:CODE,SS:CODE

	ORG	100H


START:
	JMP	MAIN

;				Ã´›ƒì«Ç›çûÇ›
FNT_R	MACRO	STRING
	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET STRING
	PUSH	ES
	INT	80H
	POP	ES
	ENDM

;				Ã´›ƒæØƒ
FNT_S	MACRO	STRING
	LOCAL	FNT_LOOP
	MOV	CX,29
	MOV	BX,4
FNT_LOOP:		
	MOV	AX,WORD PTR [STRING+BX]
	MOV	DX,AX
	SHR	DX,1
	OR	AX,DX
	MOV	WORD PTR [STRING+BX],AX
	INC	BX
	INC	BX
	LOOP	FNT_LOOP
	ENDM

MAIN:

	FNT_R	PAT0+2	
	FNT_R	PAT1+2	
	FNT_R	PAT2+2	
	FNT_R	PAT3+2	
	FNT_R	PAT4+2	
	FNT_R	PAT5+2	
	FNT_R	PAT6+2	
	FNT_R	PAT7+2	
	FNT_R	PAT8+2	
	FNT_R	PAT9+2	
	FNT_R	PATA+2	
	FNT_R	PATB+2	
	FNT_R	PATC+2	
	FNT_R	PATD+2	
	FNT_R	PATE+2	
	FNT_R	PATF+2	
	FNT_R	PATG+2	
	FNT_R	PATH+2	
	FNT_R	PATI+2	
	FNT_R	PATJ+2	
	FNT_R	PATK+2	
	FNT_R	PATL+2	
	FNT_R	PATM+2	
	FNT_R	PATN+2	
	FNT_R	PATO+2	
	FNT_R	PATP+2	
	FNT_R	PATQ+2	
	FNT_R	PATR+2	
	FNT_R	PATS+2	
	FNT_R	PATT+2	
	FNT_R	PATU+2	
	FNT_R	PATV+2	
	FNT_R	PATW+2	
	FNT_R	PATX+2	
	FNT_R	PATY+2	
	FNT_R	PATZ+2	
;Ã´›ƒæØƒ
	FNT_S	PAT0+2	
	FNT_S	PAT1+2	
	FNT_S	PAT2+2	
	FNT_S	PAT3+2	
	FNT_S	PAT4+2	
	FNT_S	PAT5+2	
	FNT_S	PAT6+2	
	FNT_S	PAT7+2	
	FNT_S	PAT8+2	
	FNT_S	PAT9+2	
	FNT_S	PATA+2	
	FNT_S	PATB+2	
	FNT_S	PATC+2	
	FNT_S	PATD+2	
	FNT_S	PATE+2	
	FNT_S	PATF+2	
	FNT_S	PATG+2	
	FNT_S	PATH+2	
	FNT_S	PATI+2	
	FNT_S	PATJ+2	
	FNT_S	PATK+2	
	FNT_S	PATL+2	
	FNT_S	PATM+2	
	FNT_S	PATN+2	
	FNT_S	PATO+2	
	FNT_S	PATP+2	
	FNT_S	PATQ+2	
	FNT_S	PATR+2	
	FNT_S	PATS+2	
	FNT_S	PATT+2	
	FNT_S	PATU+2	
	FNT_S	PATV+2	
	FNT_S	PATW+2	
	FNT_S	PATX+2	
	FNT_S	PATY+2	
	FNT_S	PATZ+2	


	CREATE_HANDLE	PNAME,0

	JC	MEKEERR
	MOV	HANDLE_D,AX


	WRITE_HANDLE	HANDLE_D,PAT0,3658

	JC	WRTERR
	CMP	AX,3658
	JE	CPYEND
	JMP	DISK_FULL

MEKEERR:
	MOV	DX,OFFSET MSGMER
	JMP	SHORT	MSGOUT

WRTERR:
	MOV	DX,OFFSET MSGWER
	JMP	SHORT	MSGOUT

DELERR:
	MOV	DX,OFFSET MSGDER
	JMP	SHORT	MSGOUT

CPYEND:
	CLOSE_HANDLE	HANDLE_D

	JC	CLSERR
	MOV	DX,OFFSET MSGEND
	JMP	SHORT	MSGOUT

CLSERR:
	MOV	DX,OFFSET MSGCER

MSGOUT:
	MOV	AH,09H
	INT	21H

	END_PROCESS


DISK_FULL:

	CLOSE_HANDLE	HANDLE_D
	JC	CLSERR
	DELETE_ENTRY	PNAME
	JC	DELERR
	MOV	DX,OFFSET MSGFER
	JMP	SHORT	MSGOUT


MSGDER		DB	CR,LF,LF,"••••Delete Err",CR,LF,"$"

MSGFER		DB	CR,LF,LF,"••••Disk Full",CR,LF,"$"

MSGMER		DB	CR,LF,LF,'••••Directory Full',CR,LF,'$'

MSGWER		DB	CR,LF,LF,'••••Disk Full',CR,LF,'$'

MSGCER		DB	CR,LF,LF,'••••Cannot Close',CR,LF,'$'

MSGEND		DB	CR,LF,LF,'••••FNT.DAT Make Complete',CR,LF,'$'

HANDLE_D	DW	?



PNAME	DB	"FNT.DAT",0

;				62*59=3658Byte
PAT0	DB	30H,0,30H,0
	DB	58	DUP(0)

PAT1	DB	31H,0,31H,0
	DB	58	DUP(0)

PAT2	DB	32H,0,32H,0
	DB	58	DUP(0)

PAT3	DB	33H,0,33H,0
	DB	58	DUP(0)

PAT4	DB	34H,0,34H,0
	DB	58	DUP(0)

PAT5	DB	35H,0,35H,0
	DB	58	DUP(0)

PAT6	DB	36H,0,36H,0
	DB	58	DUP(0)

PAT7	DB	37H,0,37H,0
	DB	58	DUP(0)

PAT8	DB	38H,0,38H,0
	DB	58	DUP(0)

PAT9	DB	39H,0,39H,0
	DB	58	DUP(0)

PATA	DB	41H,0,41H,0
	DB	58	DUP(0)

PATB	DB	42H,0,42H,0
	DB	58	DUP(0)

PATC	DB	43H,0,43H,0
	DB	58	DUP(0)

PATD	DB	44H,0,44H,0
	DB	58	DUP(0)

PATE	DB	45H,0,45H,0
	DB	58	DUP(0)

PATF	DB	46H,0,46H,0
	DB	58	DUP(0)

PATG	DB	47H,0,47H,0
	DB	58	DUP(0)

PATH	DB	48H,0,48H,0
	DB	58	DUP(0)

PATI	DB	49H,0,49H,0
	DB	58	DUP(0)

PATJ	DB	4AH,0,4AH,0
	DB	58	DUP(0)

PATK	DB	4BH,0,4BH,0
	DB	58	DUP(0)

PATL	DB	4CH,0,4CH,0
	DB	58	DUP(0)

PATM	DB	4DH,0,4DH,0
	DB	58	DUP(0)

PATN	DB	4EH,0,4EH,0
	DB	58	DUP(0)

PATO	DB	4FH,0,4FH,0
	DB	58	DUP(0)

PATP	DB	50H,0,50H,0
	DB	58	DUP(0)

PATQ	DB	51H,0,51H,0
	DB	58	DUP(0)

PATR	DB	52H,0,52H,0
	DB	58	DUP(0)

PATS	DB	53H,0,53H,0
	DB	58	DUP(0)

PATT	DB	54H,0,54H,0
	DB	58	DUP(0)

PATU	DB	55H,0,55H,0
	DB	58	DUP(0)

PATV	DB	56H,0,56H,0
	DB	58	DUP(0)

PATW	DB	57H,0,57H,0
	DB	58	DUP(0)

PATX	DB	58H,0,58H,0
	DB	58	DUP(0)

PATY	DB	59H,0,59H,0
	DB	58	DUP(0)

PATZ	DB	5AH,0,5AH,0
	DB	58	DUP(0)

CODE	ENDS
	END	START
