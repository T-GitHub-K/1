
KEY_INPUT	MACRO
		MOV	AH,08H
		INT	21H
		ENDM

CODE	SEGMENT
	ASSUME	CS:CODE,DS:CODE,SS:CODE,ES:CODE

	ORG	80H

DAT	DB	80H	DUP(0)

	ORG	100H


START:
		MOV	KEY_MAX,'9'
		CMP	DAT[0],1
		JBE	NEXT

		MOV	AL,DAT[2]

NEXT:		CMP	AL,'Y'
		JZ	INP_KEY_YN
		CMP	AL,'y'
		JZ	INP_KEY_YN

		CMP	AL,'1'
		JB	INP_KEY
		CMP	AL,'9'
		JA	INP_KEY

		MOV	KEY_MAX,AL
		
INP_KEY:
		KEY_INPUT

		CMP	AL,'1'
		JB	BEEP
		CMP	AL,KEY_MAX
		JA	BEEP

		SUB	AL,30H
		JMP	END

INP_KEY_YN:
		KEY_INPUT

		CMP	AL,'Y'
		JZ	SET_Y
		CMP	AL,'y'
		JZ	SET_Y
		CMP	AL,'N'
		JZ	SET_N
		CMP	AL,'n'
		JZ	SET_N

		JMP	BEEP

SET_Y:
		MOV	AL,0H
		JMP	END
SET_N:
		MOV	AL,99H
END:
		MOV	AH,4CH
		INT	21H

BEEP:
		MOV	AH,02H
		MOV	DL,07H
		INT	21H
		JMP	START

KEY_MAX		DB	'0'

CODE		ENDS
		END	START
