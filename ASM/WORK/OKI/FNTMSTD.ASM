INCLUDE	MDOS.H
INCLUDE	STD.H

CODE	SEGMENT
	ASSUME	CS:CODE,DS:CODE,ES:CODE,SS:CODE

	ORG	100H
	
START:
	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT0+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT1+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT2+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT3+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT4+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT5+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT6+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT7+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT8+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PAT9+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATA+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATB+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATC+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATD+2
	PUSH	ES
	INT	80H
	POP	ES


	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATE+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATF+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATG+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATH+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATI+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATJ+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATK+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATL+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATM+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATN+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATO+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATP+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATQ+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATR+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATS+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATT+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATU+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATV+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATW+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATX+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATY+2
	PUSH	ES
	INT	80H
	POP	ES

	MOV	CL,0A7H
	MOV	AL,1
	MOV	DX,OFFSET PATZ+2
	PUSH	ES
	INT	80H
	POP	ES

MAIN:

	JMP	MAIN1

		MOV	CX,29
		MOV	BX,4
M_LOOP:		
		MOV	AX,WORD PTR [PAT0+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT0+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP

		MOV	CX,29
		MOV	BX,4
M_LOOP1:
		MOV	AX,WORD PTR [PAT1+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT1+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP1

		MOV	CX,29
		MOV	BX,4
M_LOOP2:
		MOV	AX,WORD PTR [PAT2+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT2+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP2

		MOV	CX,29
		MOV	BX,4
M_LOOP3:
		MOV	AX,WORD PTR [PAT3+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT3+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP3

		MOV	CX,29
		MOV	BX,4
M_LOOP4:
		MOV	AX,WORD PTR [PAT4+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT4+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP4


		MOV	CX,29
		MOV	BX,4
M_LOOP5:
		MOV	AX,WORD PTR [PAT5+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT5+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP5

		MOV	CX,29
		MOV	BX,4
M_LOOP6:
		MOV	AX,WORD PTR [PAT6+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT6+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP6

		MOV	CX,29
		MOV	BX,4
M_LOOP7:
		MOV	AX,WORD PTR [PAT7+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT7+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP7

		MOV	CX,29
		MOV	BX,4
M_LOOP8:
		MOV	AX,WORD PTR [PAT8+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT8+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP8

		MOV	CX,29
		MOV	BX,4
M_LOOP9:
		MOV	AX,WORD PTR [PAT9+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PAT9+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOP9

		MOV	CX,29
		MOV	BX,4
M_LOOPA:
		MOV	AX,WORD PTR [PATA+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATA+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPA

		MOV	CX,29
		MOV	BX,4
M_LOOPB:
		MOV	AX,WORD PTR [PATB+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATB+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPB

		MOV	CX,29
		MOV	BX,4
M_LOOPC:
		MOV	AX,WORD PTR [PATC+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATC+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPC

		MOV	CX,29
		MOV	BX,4
M_LOOPD:
		MOV	AX,WORD PTR [PATD+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATD+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPD

		MOV	CX,29
		MOV	BX,4
M_LOOPE:
		MOV	AX,WORD PTR [PATE+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATE+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPE

		MOV	CX,29
		MOV	BX,4
M_LOOPF:
		MOV	AX,WORD PTR [PATF+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATF+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPF

		MOV	CX,29
		MOV	BX,4
M_LOOPG:
		MOV	AX,WORD PTR [PATG+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATG+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPG

		MOV	CX,29
		MOV	BX,4
M_LOOPH:
		MOV	AX,WORD PTR [PATH+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATH+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPH

		MOV	CX,29
		MOV	BX,4
M_LOOPI:
		MOV	AX,WORD PTR [PATI+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATI+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPI

		MOV	CX,29
		MOV	BX,4
M_LOOPJ:
		MOV	AX,WORD PTR [PATJ+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATJ+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPJ

		MOV	CX,29
		MOV	BX,4
M_LOOPK:
		MOV	AX,WORD PTR [PATK+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATK+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPK

		MOV	CX,29
		MOV	BX,4
M_LOOPL:
		MOV	AX,WORD PTR [PATL+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATL+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPL

		MOV	CX,29
		MOV	BX,4
M_LOOPM:
		MOV	AX,WORD PTR [PATM+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATM+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPM

		MOV	CX,29
		MOV	BX,4
M_LOOPN:
		MOV	AX,WORD PTR [PATN+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATN+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPN

		MOV	CX,29
		MOV	BX,4
M_LOOPO:
		MOV	AX,WORD PTR [PATO+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATO+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPO

		MOV	CX,29
		MOV	BX,4
M_LOOPP:
		MOV	AX,WORD PTR [PATP+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATP+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPP

		MOV	CX,29
		MOV	BX,4
M_LOOPQ:
		MOV	AX,WORD PTR [PATQ+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATQ+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPQ

		MOV	CX,29
		MOV	BX,4
M_LOOPR:
		MOV	AX,WORD PTR [PATR+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATR+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPR

		MOV	CX,29
		MOV	BX,4
M_LOOPS:
		MOV	AX,WORD PTR [PATS+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATS+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPS

		MOV	CX,29
		MOV	BX,4
M_LOOPT:
		MOV	AX,WORD PTR [PATT+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATT+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPT

		MOV	CX,29
		MOV	BX,4
M_LOOPU:
		MOV	AX,WORD PTR [PATU+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATU+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPU

		MOV	CX,29
		MOV	BX,4
M_LOOPV:
		MOV	AX,WORD PTR [PATV+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATV+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPV

		MOV	CX,29
		MOV	BX,4
M_LOOPW:
		MOV	AX,WORD PTR [PATW+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATW+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPW

		MOV	CX,29
		MOV	BX,4
M_LOOPX:
		MOV	AX,WORD PTR [PATX+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATX+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPX

		MOV	CX,29
		MOV	BX,4
M_LOOPY:
		MOV	AX,WORD PTR [PATY+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATY+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPY

		MOV	CX,29
		MOV	BX,4
M_LOOPZ:
		MOV	AX,WORD PTR [PATZ+BX]
		MOV	DX,AX
		SHR	DX,1
		OR	AX,DX
		SHR	DX,1
	 	OR	AX,DX
		MOV	WORD PTR [PATZ+BX],AX
		INC	BX
		INC	BX
		LOOP	M_LOOPZ

MAIN1:

		CREATE_HANDLE	PNAME,0

		JC	MEKEERR
		MOV	HANDLE_D,AX

;
		WRITE_HANDLE	HANDLE_D,PAT0,3658
		
		JC	WRTERR
		CMP	AX,3658
		JE	CPYEND
		JMP	DISK_FULL

MEKEERR:
		MOV	DX,OFFSET MSGMER
		JMP	SHORT	MSGOUT

WRTERR:		MOV	DX,OFFSET MSGWER
		JMP	SHORT	MSGOUT

DELERR:		MOV	DX,OFFSET MSGDER
		JMP	SHORT	MSGOUT

CPYEND:
		CLOSE_HANDLE	HANDLE_D

		JC	CLSERR
		MOV	DX,OFFSET MSGEND
		JMP	SHORT	MSGOUT
;
CLSERR:		MOV	DX,OFFSET MSGCER
;
MSGOUT:
		MOV	AH,09H
		INT	21H
;
		END_PROCESS


DISK_FULL:
		CLOSE_HANDLE	HANDLE_D
		JC	CLSERR
		DELETE_ENTRY	PNAME
		JC	DELERR
		MOV	DX,OFFSET MSGFER
		JMP	SHORT	MSGOUT


MSGDER		DB	CR,LF,LF,"본본Delete Err",CR,LF,"$"

MSGFER		DB	CR,LF,LF,"본본Disk Full",CR,LF,"$"

MSGMER		DB	CR,LF,LF,'본본Directory Full',CR,LF,'$'

MSGWER		DB	CR,LF,LF,'본본Disk Full',CR,LF,'$'

MSGCER		DB	CR,LF,LF,'본본Cannot Close',CR,LF,'$'

MSGEND		DB	CR,LF,LF,'본본FNT.DAT Make Complete',CR,LF,'$'

HANDLE_D	DW	?



PNAME	DB	"FNT.DAT",0

;				62*59=3658Byte
PAT0	DB	30H,0
	DB	30H,0
	DB	58	DUP(0)

PAT1	DB	31H,0
	DB	31H,0
	DB	58	DUP(0)

PAT2	DB	32H,0
	DB	32H,0
	DB	58	DUP(0)

PAT3	DB	33H,0
	DB	33H,0
	DB	58	DUP(0)

PAT4	DB	34H,0
	DB	34H,0
	DB	58	DUP(0)

PAT5	DB	35H,0
	DB	35H,0
	DB	58	DUP(0)

PAT6	DB	36H,0
	DB	36H,0
	DB	58	DUP(0)

PAT7	DB	37H,0
	DB	37H,0
	DB	58	DUP(0)

PAT8	DB	38H,0
	DB	38H,0
	DB	58	DUP(0)

PAT9	DB	39H,0
	DB	39H,0
	DB	58	DUP(0)

PATA	DB	41H,0
	DB	41H,0
	DB	58	DUP(0)

PATB	DB	42H,0
	DB	42H,0
	DB	58	DUP(0)

PATC	DB	43H,0
	DB	43H,0
	DB	58	DUP(0)

PATD	DB	44H,0
	DB	44H,0
	DB	58	DUP(0)

PATE	DB	45H,0
	DB	45H,0
	DB	58	DUP(0)

PATF	DB	46H,0
	DB	46H,0
	DB	58	DUP(0)

PATG	DB	47H,0
	DB	47H,0
	DB	58	DUP(0)

PATH	DB	48H,0
	DB	48H,0
	DB	58	DUP(0)

PATI	DB	49H,0
	DB	49H,0
	DB	58	DUP(0)

PATJ	DB	4AH,0
	DB	4AH,0
	DB	58	DUP(0)

PATK	DB	4BH,0
	DB	4BH,0
	DB	58	DUP(0)

PATL	DB	4CH,0
	DB	4CH,0
	DB	58	DUP(0)

PATM	DB	4DH,0
	DB	4DH,0
	DB	58	DUP(0)

PATN	DB	4EH,0
	DB	4EH,0
	DB	58	DUP(0)

PATO	DB	4FH,0
	DB	4FH,0
	DB	58	DUP(0)

PATP	DB	50H,0
	DB	50H,0
	DB	58	DUP(0)

PATQ	DB	51H,0
	DB	51H,0
	DB	58	DUP(0)

PATR	DB	52H,0
	DB	52H,0
	DB	58	DUP(0)

PATS	DB	53H,0
	DB	53H,0
	DB	58	DUP(0)

PATT	DB	54H,0
	DB	54H,0
	DB	58	DUP(0)

PATU	DB	55H,0
	DB	55H,0
	DB	58	DUP(0)

PATV	DB	56H,0
	DB	56H,0
	DB	58	DUP(0)

PATW	DB	57H,0
	DB	57H,0
	DB	58	DUP(0)

PATX	DB	58H,0
	DB	58H,0
	DB	58	DUP(0)

PATY	DB	59H,0
	DB	59H,0
	DB	58	DUP(0)

PATZ	DB	5AH,0
	DB	5AH,0
	DB	58	DUP(0)

CODE	ENDS
	END	START
