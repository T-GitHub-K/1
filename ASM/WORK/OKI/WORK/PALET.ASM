INCLUDE	STD.H
INCLUDE	BIOS.H
INCLUDE	MACRO.H
INCLUDE	MDOS.H


D_FG	EQU	7
D_BG	EQU	7
D_FGC	EQU	0
D_BGC	EQU	1


H_FG	EQU	7
H_BG	EQU	1
H_FGC	EQU	0
H_BGC	EQU	0

B_FG	EQU	7
B_BG	EQU	7
B_FGC	EQU	0
B_BGC	EQU	1


CODE	SEGMENT	PUBLIC
	ASSUME	CS:CODE,DS:CODE,ES:CODE,SS:CODE

	ORG	100H

S:
	BIOS_42	0

	MOV	CL,68H
	MOV	AH,0
	MOV	DX,OFFSET PDATA0
	PUSH	ES
	INT	80H
	POP	ES

	COLOR_M	D_FG,D_BG,D_FGC,D_BGC

	LOCATE_M	1,60
	BIOS_D7	PA1

	LOCATE_M	2,60
	BIOS_D7	PA2

	LOCATE_M	3,60
	BIOS_D7	PA3

	LOCATE_M	4,60
	BIOS_D7	PA4

	LOCATE_M	5,60
	BIOS_D7	PA5

	LOCATE_M	6,60
	BIOS_D7	PA6

	LOCATE_M	7,60
	BIOS_D7	PA7

	LOCATE_M	8,60
	BIOS_D7	PA8

	LOCATE_M	9,60
	BIOS_D7	PA9

	LOCATE_M       10,60
	BIOS_D7	PA10

	LOCATE_M       11,60
	BIOS_D7	PA11

	LOCATE_M       12,60
	BIOS_D7	PA12

	LOCATE_M       13,60
	BIOS_D7	PA13

	LOCATE_M       14,60
	BIOS_D7	PA14

	LOCATE_M       15,60
	BIOS_D7	PA15

	LOCATE_M       16,60
	BIOS_D7	PA16

S1:
	MOV	HY,1
	MOV	HX,60
	LOCATE_M	HY,HX
	COLOR_M	H_FG,H_BG,H_FGC,H_BGC
	BIOS_D7	PA1
S1_1:

	CALL	INP1
	CMP	HY,99
	JNE	S2
	JMP	P_EXIT
S2:
	CMP	HY,0
	JNE	S3
	BIOS_29	BEEP
	MOV	AH,HYB
	MOV	HY,AH
	JMP	S1_1
S3:
	CMP	HY,17
	JNE	S4
	BIOS_29	BEEP
	MOV	AH,HYB
	MOV	HY,AH
	JMP	S1_1
S4:
	LOCATE_M	HYB,HX
	COLOR_M	D_FG,D_BG,D_FGC,D_BGC
	XOR	AX,AX	
	MOV	AL,HYB
	XOR	BX,BX
	XOR	DX,DX
	MOV	BL,13
	MUL	BX
	MOV	BX,AX

	PUSH	ES
	MOV	CL,0D7H				;BIOS CALL
	LEA	DX,PA0[BX]			;INT 80H
	INT	80H				;'$'Ç‹Ç≈ï\é¶
	POP	ES

	LOCATE_M	HY,HX
	COLOR_M	H_FG,H_BG,H_FGC,H_BGC
	XOR	AX,AX	
	MOV	AL,HY
	XOR	BX,BX
	XOR	DX,DX
	MOV	BL,13
	MUL	BX
	MOV	BX,AX

	PUSH	ES
	MOV	CL,0D7H				;BIOS CALL
	LEA	DX,PA0[BX]			;INT 80H
	INT	80H				;'$'Ç‹Ç≈ï\é¶
	POP	ES

	JMP	S1_1

P_EXIT:

	BIOS_42	1
	END_PROCESS	0



INP1	PROC	NEAR

INP_S:
	BIOS_18

	CMP	AL,0BH
	JNE	INP1_1
	MOV	AH,HY
	MOV	HYB,AH
	DEC	HY
	JMP	SHORT INP1_EXIT
INP1_1:
	CMP	AL,0AH
	JNE	INP1_NEXT
	MOV	AH,HY
	MOV	HYB,AH
	INC	HY
	JMP	SHORT INP1_EXIT
INP1_NEXT:
	CMP	AL,"*"
	JNE	INP1_NEXT1
	MOV	HY,99
	JMP	SHORT INP1_EXIT
INP1_NEXT1:
	CMP	AL,CR
	JZ	SUB1
	BIOS_29	BEEP
	JMP	INP_S
SUB1:
	XOR	BX,BX
	MOV	BL,HY
	MOV	SI,OFFSET TBL
	ADD	SI,BX
	ADD	SI,BX
	JMP	[SI]

INP1_EXIT:
	RET

CO0:
CO1:
CO2:
CO3:
CO4:
CO5:
CO6:
CO7:
CK0:
CK1:
CK2:
CK3:
CK4:
CK5:
CK6:
CK7:
	COLOR_M  B_FG,B_BG,B_FGC,B_BGC
	BIOS_D7	BOX

JMP	INP1_EXIT

TBL	DW	    0,CO0,CO1,CO2,CO3,CO4,CO5,CO6,CO7
	DW	     CK0,CK1,CK2,CK3,CK4,CK5,CK6,CK7

INP1	ENDP



HY	DB	0
HX	DB	0
HYB	DB	0
HXB	DB	0


PDATA0	DB	3 DUP(0)
PDATA1	DB	3 DUP(0)
PDATA2	DB	3 DUP(0)
PDATA3	DB	3 DUP(0)
PDATA4	DB	3 DUP(0)
PDATA5	DB	3 DUP(0)
PDATA6	DB	3 DUP(0)
PDATA7	DB	3 DUP(0)
PDATA8	DB	3 DUP(0)
PDATA9	DB	3 DUP(0)
PDATA10	DB	3 DUP(0)
PDATA11	DB	3 DUP(0)
PDATA12	DB	3 DUP(0)
PDATA13	DB	3 DUP(0)
PDATA14	DB	3 DUP(0)
PDATA15	DB	3 DUP(0)
                 
;                123456789ABC  D
PA0	DB	"            ",0
PA1	DB	"ïWèÄ COLOR 0",0
PA2	DB	"ïWèÄ COLOR 1",0
PA3	DB	"ïWèÄ COLOR 2",0
PA4	DB	"ïWèÄ COLOR 3",0
PA5	DB	"ïWèÄ COLOR 4",0
PA6	DB	"ïWèÄ COLOR 5",0
PA7	DB	"ïWèÄ COLOR 6",0
PA8	DB	"ïWèÄ COLOR 7",0
PA9	DB	"ägí£ COLOR 0",0
PA10	DB	"ägí£ COLOR 1",0
PA11	DB	"ägí£ COLOR 2",0
PA12	DB	"ägí£ COLOR 3",0
PA13	DB	"ägí£ COLOR 4",0
PA14	DB	"ägí£ COLOR 5",0
PA15	DB	"ägí£ COLOR 6",0
PA16	DB	"ägí£ COLOR 7",0

BOX	DB	CR,LF
	DB	"ÚXÚbÚbÚbÚbÚbÚbÚbÚbÚZ",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Úa                Úa",CR,LF
	DB	"Ú[ÚbÚbÚbÚbÚbÚbÚbÚbÚ]",CR,LF
	DB	"Úa  ê‘ Å@ê¬Å@ óŒ  Úa",CR,LF
	DB	"Ú^ÚbÚbÚbÚbÚbÚbÚbÚbÚ`",CR,LF,"$"





CODE	ENDS
	END	S
	



	