INCLUDE	MDOS.H
INCLUDE	STD.H
INCLUDE	UTY.H
INCLUDE	MACRO.H

WAIT_DT		EQU	1

CODE	SEGMENT	PUBLIC
	ASSUME	CS:CODE,DS:CODE,ES:CODE

	ORG	100H

START:		

		;INPUT_M	MACRO	LY,LX,STRING,COUNT,OP,FEP
		;LOCATE_M	MACRO	LY,LX
		;COLOR_M	MACRO	FGC,BGC,FG,P

		COLOR_M		1,7,1,0	;FG=青 BG=白 拡張=BG,明
		DISPLAY_CHAR	CLS

		COLOR_M		7,2,0,1	;FG=白 BG=赤 拡張=FG,暗
		LOCATE_M	1,26
		MOV	DX,OFFSET TITLE0
		CALL	INP_CRT



NEXT:
		COLOR_M		7,2,1,0	;FG=白 BG=緑 拡張=BG,暗
		COLOR_M		7,2,0,0	;FG=白 BG=緑 拡張=FG,明
		LOCATE_M	8,10
		MOV	DX,OFFSET GAMEN0
		CALL	INP_CRT
		LOCATE_M	9,10
		MOV	DX,OFFSET GAMEN1
		CALL	INP_CRT
		LOCATE_M	10,10
		MOV	DX,OFFSET GAMEN2
		CALL	INP_CRT
		LOCATE_M	11,10
		MOV	DX,OFFSET GAMEN3
		CALL	INP_CRT
		LOCATE_M	12,10
		MOV	DX,OFFSET GAMEN4
		CALL	INP_CRT
		LOCATE_M	13,10
		MOV	DX,OFFSET GAMEN5
		CALL	INP_CRT
		

MSG_INP:	
		DISPLAY		INPCLS
		DIR_CONSOLE_INPUT
		CMP	AL,"*"
		JNE	MSG_INP1
		JMP	EXIT
MSG_INP1:
		CMP	AL,"+"
		JZ	OFF_S
		DISPLAY_CHAR	BEEP
		JMP	SHORT	MSG_INP

OFF_S:
		COLOR_M		0,7,1,1	;FG=白 BG=緑 拡張=BG,暗
		LOCATE_M	COUNT,0
		MOV	DX,OFFSET ENDGMN0
		CALL	INP_CRT
;		DISPLAY_CHAR	BEEP
		CALL	WAIT_S

		INC	COUNT
		CMP	COUNT,10
		JZ	OFF_S1EXIT
		JMP	OFF_S
OFF_S1EXIT:
		LOCATE_M	COUNT,0
		MOV	DX,OFFSET ENDGMN1
		CALL	INP_CRT
;		DISPLAY_CHAR	BEEP
		CALL	WAIT_S

		INC	COUNT

		LOCATE_M	COUNT,0
		MOV	DX,OFFSET ENDGMN2
		CALL	INP_CRT
;		DISPLAY_CHAR	BEEP
		CALL	WAIT_S

		INC	COUNT

		LOCATE_M	COUNT,0
		MOV	DX,OFFSET ENDGMN3
		CALL	INP_CRT
;		DISPLAY_CHAR	BEEP
		CALL	WAIT_S

		INC	COUNT

OFF_S_L:
		LOCATE_M	COUNT,0
		MOV	DX,OFFSET ENDGMN0
		CALL	INP_CRT
;		DISPLAY_CHAR	BEEP
		CALL	WAIT_S

		INC	COUNT
		CMP	COUNT,25
		JZ	EXIT
		JMP	OFF_S_L

EXIT:
		CMP	AL,"*"
		JNE	EXIT1
		DISPLAY		INPPRN
		END_PROCESS 99H
EXIT1:
		END_PROCESS 0


WAIT_S	PROC
	MOV	CX,WAIT_DT
   WAIT_T:
	MOV	AX,0FFFFH
      WAIT_TT:
		DEC	AX
		OR 	AX,AX
		JNE	WAIT_TT
   LOOP	WAIT_T
	RET
WAIT_S	ENDP

INP_CRT	PROC	NEAR				;画面表示	ﾙｰﾁﾝ
	MOV	CL,0D7H				;BIOS CALL
;	MOV	DX,OFFSET INTBL.IN_D		;INT 80H
	PUSH	ES				;CL=0D7H
	INT	80H				;'$'まで表示
	POP	ES
	RET
INP_CRT	ENDP


TITLE0	DB	"＊  システムオリジン静岡  ＊"
	DB	"$"
     
GAMEN0	DB "XbbbbbbbbbbbbbbbbbbbbbbbbbbbbZ",CR,LF
DB	"$" 
GAMEN1	DB "a         ※ 静岡支店の本日の業務を終了します。 ※       a",CR,LF
DB	"$" 
GAMEN2	DB "a   今日も一日ご苦労様でした。明日もガンバルれるように   a",CR,LF
DB	"$" 
GAMEN3	DB "a          お家に帰ってゆっくりおやすみください 。       a",CR,LF
DB	"$" 
GAMEN4	DB "a     　　   ★ ＋を入力すると電源を切ります。★         a",CR,LF
DB	"$" 
GAMEN5	DB "^bbbbbbbbbbbbbbbbbbbbbbbbbbbb`",CR,LF
DB	"$" 

ENDGMN0 DB "KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK","$"
ENDGMN1 DB "KKKKKKKKKKKKK                            KKKKKKKKKKKKK","$"
ENDGMN2 DB "KKKKKKKKKKKKK 本日の営業は終了しました。 KKKKKKKKKKKKK","$"
ENDGMN3 DB "KKKKKKKKKKKKK                            KKKKKKKKKKKKK","$"


INPCLS	DB	ESC,"0$"
INPPRN	DB	ESC,"1$"

COUNT	DB	0

CODE	ENDS
	END	START
